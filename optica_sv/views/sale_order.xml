<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>


<!-- pantalla de cierres  -->
<record model="ir.ui.view" id="optica_sv.cierre_form">
<field name="name">optica_sv.cierre_form</field>
<field name="model">optica_sv.cierre</field>
<field name="arch" type="xml">
 <form>
        <header>
          <button name="calcular" string="Calcular" type="object" class="oe_highlight" attrs="{'invisible':[('state', '=', 'Cerrado')]}"/>
          <button name="liberar" string="Liberar" type="object" class="oe_highlight" attrs="{'invisible':[('state', '=', 'Cerrado')]}"/>
          <button name="cerrar" string="Cerrar" type="object" class="oe_highlight" attrs="{'invisible':[('state', '=', 'Cerrado')]}"/>
          <field name="state" widget="statusbar"/>
        </header>
         <sheet>
             <div class="oe_title oe_inline">
                 <label for="name" class="oe_edit_only"/>
                 <h1><field name="name"/></h1>
             </div>
             <group>
                 <group>
                     <field name="fecha" />
                     <field name="sucursal_id" />
                     <field name="venta_ids"  readonly="1"/>
                     <field name="factura_ids"  readonly="1"/>
                     <field name="pago_ids"  readonly="1"/>
                     <field name="cierrepago_ids" readonly="1">
                       <tree string="Metodos de pago">
                         <field name="name" />
                         <field name="monto" />
                      </tree>
                     </field>
                 </group>
             </group>

         </sheet>
         </form>
</field>
</record>

<record model="ir.ui.view" id="optica_sv.cierre_tree">
<field name="name">optica_sv.cierre_tree</field>
<field name="model">optica_sv.cierre</field>
<field name="arch" type="xml">
<tree string="Cierres">
 <field name="name"/>
 <field name="sucursal_id" />
 <field name="fecha" />
 <field name="total_venta" />
 <field name="total_facturado" />
 <field name="total_pagado" />
</tree>
</field>
</record>

<record model="ir.actions.act_window" id="optica_sv.cierre_action">
<field name="name">Cierres</field>
<field name="res_model">optica_sv.cierre</field>
<field name="view_type">form</field>
<field name="view_mode">tree,form</field>
<field name="help" type="html">
<p class="oe_view_nocontent_create">Cierres por sucursal</p>
</field>
</record>


<menuitem name="Cierre"
parent="sale.sale_order_menu"
id="optica_sv.cierres"
sequence="31"
action="optica_sv.cierre_action"
groups="base.group_user"/>






  </data>
</odoo>
